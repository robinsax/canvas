/*
toolkit.js

Author: Robin Saxifrage
License: Apache 2.0
*/
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(){var n,r,i,t,o,h,s,f,u,a,l,d=[].indexOf;f={},u=function(u){return function(){var e,r,t,n,i,o,s;for(e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._call.apply(this,t)},s=r=new u;;){for(t=0,n=(o=Object.getOwnPropertyNames(s)).length;t<n;t++)"function"==typeof s[i=o[t]]?e[i]=s[i]:Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i));if(!(s=Object.getPrototypeOf(s)))break}return e}},t=function(){function e(){_classCallCheck(this,e),this.initFunctions=[],this.inspectionFunctions=[],this.modules=[]}return _createClass(e,[{key:"attach",value:function(e){return this.modules.push(e),this}},{key:"onto",value:function(e){var t,n,r,i;for(n=0,r=(i=this.modules).length;n<r;n++)(t=new(0,i[n])(e)).called&&(e[t.called]=t);return this}},{key:"init",value:function(){var e,t,n;for(e=0,t=(n=this.initFunctions).length;e<t;e++)(0,n[e])();return this}},{key:"inspect",value:function(e){var t,n,r;if(0<this.inspectionFunctions.length)for(e=e.extend(e.children()),t=0,n=(r=this.inspectionFunctions).length;t<n;t++)(0,r[t])(e);return this}}]),e}(),a=new t,n=function(){function r(e,t,n){_classCallCheck(this,r),this.tk=e,this.info={method:t,url:n,success:function(){return{}},failure:function(){return{}},query:{},headers:{},body:null}}return _createClass(r,[{key:"success",value:function(e){return this.info.success=e,this}},{key:"failure",value:function(e){return this.info.failure=e,this}},{key:"json",value:function(e){return this.info.headers["Content-Type"]="application/json",this.info.body=this.tk.unbound(e),this}},{key:"data",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text/plain";return this.info.headers["Content-Type"]=t,this.info.body=e,this}},{key:"header",value:function(e,t){return this.info.headers[e]=t,this}},{key:"query",value:function(e){return this.info.query=e,this}},{key:"send",value:function(){var e,r,t,n,i,o,s,u,a,l=this;if(n=function(e){var t,n,r;switch(r=e.status,n=e.getResponseHeader("Content-Type"),t=e.responseText,n){case"application/json":t=JSON.parse(t)}return l.tk.log("Received "+r+" ("+l.info.method+", "+l.info.url+")"),(r<400?l.info.success:l.info.failure)(t,r)},e=this.info.url,s="",0<(i=Object.keys(this.info.query))&&(e+="?"+function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)r=i[e],n.push(r+"="+encodeURIComponent(this.info.query[r]));return n}.call(this).join("&")),this.info.body)switch(t=this.info.headers["Content-Type"]){case"application/json":s=JSON.stringify(this.info.body);break;default:throw"Unknown outgoing mimetype "+t}for(r in(a=new XMLHttpRequest).onreadystatechange=function(){if(4===this.readyState)return n(this)},a.open(this.info.method,e,!0),o=this.info.headers)u=o[r],a.setRequestHeader(r,u);return a.send(s),this.tk.log("Sent ("+this.info.method+", "+this.info.url+")",this.info.body)}}]),r}(),a.attach(u(function(){function t(e){_classCallCheck(this,t),this.tk=e,this.called="request"}return _createClass(t,[{key:"_call",value:function(e,t){return new n(this,e,t)}}]),t}())),h=function(){var t=function(){function v(e,t){var n,r,i;if(_classCallCheck(this,v),this.parent=t,e instanceof v)this.set=e.set.slice();else if(e instanceof Element||e instanceof Node||e instanceof Window)this.set=[e];else if(e instanceof NodeList||e instanceof Array)for(this.set=[],r=0,i=e.length;r<i;r++)n=e[r],this.set=this.set.concat(v.clean(n));else{if("string"!=typeof e)throw"Illegal selection: "+e;this.set=v.tk.config.root.querySelectorAll(e)}this.length=this.set.length,this.empty=0===this.length}return _createClass(v,null,[{key:"clean",value:function(e){var t,n,r,i;if(e instanceof Node)return[e];for(e instanceof v&&(e=e.set),t=[],r=0,i=e.length;r<i;r++)(n=e[r])instanceof v?t=t.concat(n.set):t.push(n);return t}}]),_createClass(v,[{key:"back",value:function(){if(!this.parent)throw"Illegal back";return this.parent}},{key:"ith",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e<0||e>this.length)throw"Out of bounds: "+e;return t?new v(this.set[e],this):this.set[e]}},{key:"first",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.ith(0,e)}},{key:"reversed",value:function(){var e;return(e=this.set.slice()).reverse(),new v(e,this)}},{key:"reduce",value:function(t){var e;switch(void 0===t?"undefined":_typeof(t)){case"string":e=this.compr(function(e){if(e.is(t))return e});break;case"function":e=this.compr(t);break;default:throw"Illegal reducer"}return new v(e,this)}},{key:"extend",value:function(e){var t;if(e instanceof v)t=e.set;else{if(!(e instanceof Array||e instanceof NodeList))throw"Illegal extension";t=v.clean(e)}return new v(this.set.concat(t,this))}},{key:"parents",value:function(){var r,n,i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"*",s=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if((n=["string","function","boolean"].indexOf(void 0===o?"undefined":_typeof(o)))<0)throw"Illegal condition";return 2===n&&(n=0,o="*",s=!1),r=function(e,t){return 0===n?e.is(o):o(e,t)},i=[],this.iter(function(e,t){var n;for(n=e.first(!1).parentNode;n!==v.tk.config.root;){if(r(tk(n,t))&&i.push(n),!s)return;n=n.parentNode}}),new v(i,this)}},{key:"children",value:function(){var c,h,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"*",d=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if((c=["string","function"].indexOf(void 0===f?"undefined":_typeof(f)))<0)throw"Illegal condition";return h=[],this.iter(function(e,t){var n,r,i,o,s,u,a,l;if((e=e.first(!1)).nodeType!==Node.TEXT_NODE){if(l=[],0===c)if(d)l=e.querySelectorAll(f);else for(i=0,s=(a=e.children).length;i<s;i++)(r=a[i]).matches(f)&&(l=r);else for(new v(n=d?e.querySelectorAll("*"):e.children),o=0,u=n.length;o<u;o++)r=n[o],f(wrap,t)&&(l=r);return h=h.concat(l)}}),new v(h,this)}},{key:"copy",value:function(){var e;return e=this.set[0].cloneNode(!0),new v(e,this)}},{key:"iter",value:function(e){var t,n,r,i;for(t=n=0,r=(i=this.set).length;n<r&&!1!==e(new v(i[t]),t);t=++n);return this}},{key:"compr",value:function(e){var t,n,r,i,o,s;for(o=[],t=n=0,r=(i=this.set).length;n<r;t=++n)void 0!==(s=e(new v(i[t]),t))&&o.push(s);return o}},{key:"is",value:function(e){var t,n,r,i,o,s;for(t=["string","function"].indexOf(void 0===e?"undefined":_typeof(e)),r=i=0,o=(s=this.set).length;i<o;r=++i){if(n=s[r],!(0!==t||n.nodeType!==Node.TEXT_NODE&&n.matches(e)))return!1;if(1===t&&!e(new v(n),r))return!1}return!0}},{key:"classes",value:function(){var e,t,n,r,i,o,s,u,a;for(e=[],n=r=0,o=(a=this.set).length;r<o;n=++r)for(i=0,s=(u=a[n].className.split(/\s+/)).length;i<s;i++)t=u[i],d.call(e,t)<0&&e.push(t);return e}},{key:"value",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f;return t===f?"checkbox"===this.set[0].type?this.set[0].checked:(t=this.set[0].value)?"number"===this.set[0].type?+t:t:null:(this.iter(function(e){return"select"===e.tag().toLowerCase()?e.children("option").attr("selected",function(e){return!!e.attr("value"===t)||null}):e.first(!1).value=t}),this)}},{key:"attr",value:function(n){var e,t,r,i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;if("string"==typeof n){if(o===f)return this.set[0].getAttribute(n);for(t=0,r=(i=this.set).length;t<r;t++)e=i[t],null===o?e.removeAttribute(n):e.setAttribute(n,o);return this}if("object"===(void 0===n?"undefined":_typeof(n)))return this.iter(function(e){var t;for(t in n)o=n[t],e.attr(t,o)}),this;throw"Illegal argument: "+n}},{key:"css",value:function(e){var t,n,o=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;if(t=function(r,i){return r=r.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),o.iter(function(e,t){var n;return"number"==typeof(n=v.tk.resolve(i,e,t))&&(n+="px"),e.set[0].style[r]=n})},"string"==typeof e){if(r===f)return window.getComputedStyle(this.set[0]).getPropertyValue(e);t(e,r)}else{if("object"!==(void 0===e?"undefined":_typeof(e)))throw"Illegal argument";for(n in e)t(n,r=e[n])}return this}},{key:"on",value:function(e){var t,n,r,i,o,s=this,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;if(t=function(i,o){return s.iter(function(t,n){var e,r;return(e=t.first(!1)).__listeners__||(e.__listeners__=[]),"function"==typeof i&&(i=i(t,n)),r={event:i,callback:function(e){return o(t,e,n)}},e.__listeners__.push(r),e.addEventListener(r.event,r.callback)})},"string"==typeof e)if(u===f){if(null==pure.__listeners__)return[];for(n=0,r=(o=pure.__listeners__).length;n<r;n++)return o[n].callback}else t(e,u);else{if("object"!==(void 0===e?"undefined":_typeof(e)))throw"Illegal argument";for(i in e)t(i,e[i])}return this}},{key:"off",value:function(r){var e,t,n,i,o,s,u,a;for(t=0,i=(u=this.set).length;t<i;t++){for(e=u[t],n=0,o=(s=null!=e.__listeners__||[]).length;n<o;n++)(a=s[n]).event===r&&e.removeEventListener(a.event,a.callback);e.__listeners__=function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)(a=s[e]).event!==r&&n.push(a);return n}()}return this}},{key:"classify",value:function(t){var c,n,r,i=this,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:f;if(c=function(u,a,l){return"toggle"===a&&(a=function(t,n){return!e.is(selector)}),i.iter(function(e,t){var n,r,i,o,s;if("function"==typeof(r=a)&&(r=r(e,t)),n=e.classes(),i=0<=d.call(n,u),r&&!i?n.push(u):!r&&i&&(o=n.indexOf(u),n.splice(o,1)),e.set[0].className=n.join(" ").trim(),l!==f)return"function"==typeof(s=l)&&(s=s(e,t)),v.tk.timeout(s,function(e){return c(u,!r,f)})})},"string"==typeof t)c(t,o,s);else for(r in t)n=t[r],c(r,n,f);return this}},{key:"remove",value:function(){var e,t,n,r;for(t=0,n=(r=this.set).length;t<n;t++)null!==(e=r[t]).parentNode&&e.parentNode.removeChild(e);return this}},{key:"append",value:function(e){var t,n,r,i;for((e=new v(e,this)).remove(),v.tk.guts.inspect(e),n=0,r=(i=e.set).length;n<r;n++)t=i[n],this.set[0].appendChild(t);return e}},{key:"prepend",value:function(e){var t,n,r;for((e=new v(e,this)).remove(),v.tk.guts.inspect(e),n=(r=e.set).length-1;0<=n;n+=-1)t=r[n],this.set[0].prepend(t);return e}},{key:"replace",value:function(e){return e instanceof v&&(e=e.first(!1)),this.set[0].parentNode.replaceChild(e,this.set[0]),new v(e,this.parent)}},{key:"tag",value:function(){return this.set[0].tagName}},{key:"next",value:function(){var e,t,n,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f;if(i===f)return this.empty?new v([]):new v(this.set[0].nextSibling,this);for(!i instanceof v&&(i=tk(i)),t=0,n=(r=i.set).length;t<n;t++)e=r[t],this.set[0].parentNode.insertBefore(e,this.set[0].nextSibling);return i.parent=this,i}},{key:"prev",value:function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f;if(r===f)return this.empty?new v([]):new v(this.set[0].previousSibling,this);for(!r instanceof v&&(r=tk(r)),t=(n=r.set).length-1;0<=t;t+=-1)e=n[t],this.set[0].parentNode.insertBefore(e,this.set[0]);return r.parent=this,r}},{key:"html",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f;return n===f?this.set[0].innerHTML:(this.iter(function(e,t){return e.set[0].innerHTML=v.tk.resolve(n,e,t)}),this)}},{key:"text",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f;return n===f?this.set[0].textContent:(this.iter(function(e,t){return e.set[0].textContent=v.tk.resolve(n,e,t)}),this)}},{key:"select",value:function(){return this.set[0].select(),this}},{key:"offset",value:function(){var e,t,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(t={x:0,y:0},e=this.set[0];e&&(t.x+=e.offsetLeft,t.y+=e.offsetTop,!n);)e=e.offsetParent;return t}},{key:"size",value:function(){var e,t,n,r,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return n={width:(e=(t=this.set[0]).getBoundingClientRect()).width,height:e.height},i&&(r=window.getComputedStyle(t,null),n.width+=r.getPropertyValue("margin-left"),n.width+=r.getPropertyValue("margin-right"),n.height+=r.getPropertyValue("margin-top"),n.height+=r.getPropertyValue("margin-bottom"),"border-box"===r.getPropertyValue("box-sizing")&&(n.width+=r.getPropertyValue("padding-left"),n.width+=r.getPropertyValue("padding-right"),n.height+=r.getPropertyValue("padding-top"),n.height+=r.getPropertyValue("padding-bottom"))),n}}]),v}();return t.tk=null,t}.call(this),a.attach(function e(t){_classCallCheck(this,e),(t.ToolkitSelection=h).tk=t}),o=function(){function r(e,t){var n;_classCallCheck(this,r),this.object=e,this.property=t,this.object.__listeners__||(this.object.__listeners__={}),this.object.__listeners__[this.property]||(this.object.__listeners__[this.property]=[],n=this._descriptor(this.object[this.property],this.object.__listeners__[this.property]),Object.defineProperty(this.object,this.property,n)),this.object.__listeners__[this.property].push(this),this._changed=function(){},this._accessed=function(){}}return _createClass(r,[{key:"_descriptor",value:function(e,r){var i;return i=e,{get:function(){var e,t;for(e=0,t=r.length;e<t;e++)r[e]._accessed(i);return i},set:function(e){var t,n;if(i===e)return i;for(i=e,t=0,n=r.length;t<n;t++)r[t]._changed(e);return i}}}},{key:"changed",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return this._changed=e,t&&e(this.object[this.property]),this}},{key:"accessed",value:function(e){return this._accessed=e,this}},{key:"remove",value:function(){var e;return e=this.object.__listeners__[this.property].indexOf(this),this.object.__listeners__[this.property].splice(e,1),this}}]),r}(),i=function(){function t(e){_classCallCheck(this,t),this.array=e,this.array.__listeners__||this._mixinListeners(),this.array.__listeners__.push(this),this._added=function(){},this._removed=function(){},this._accessed=function(){}}return _createClass(t,[{key:"_mixinListeners",value:function(){var i,c,y,g,_,k=this;return g=this.array.__listeners__=[],_=function(){var e,t,n,r,i;for(i=[],t=n=0,r=k.array.length;0<=r?n<r:r<n;t=0<=r?++n:--n)e=k._indexDescriptor(k.array[t],t,g),i.push(Object.defineProperty(k.array,t+"",e));return i},c=this.array.push,this.array.push=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o,s,u,a,l;for(l=k.array.length,c.apply(k.array,t),_(),r=o=0,u=t.length;o<u;r=++o)for(i=t[r],s=0,a=g.length;s<a;s++)g[s]._added(i,l+r);return k.array.length},i=this.array.pop,this.array.pop=function(){var e,t,n,r;for(r=k.array[e=k.array.length-1],i.apply(k.array),_(),t=0,n=g.length;t<n;t++)g[t]._removed(r,e);return r},y=this.array.splice,this.array.splice=function(i,o){for(var e=arguments.length,t=Array(2<e?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];var s,r,u,a,l,c,h,f,d,v,p;for(v=function(){var e,t,n,r;for(r=[],s=e=t=i,n=i+o;t<=n?e<n:n<e;s=t<=n?++e:--e)r.push(this.array[s]);return r}.call(k),p=y.apply(k.array,[i,o].concat(t)),_(),s=r=0,f=o;0<=f?r<f:f<r;s=0<=f?++r:--r)for(u=0,l=g.length;u<l;u++)g[u]._removed(v[s],i+s);for(s=a=0,d=t.length;0<=d?a<d:d<a;s=0<=d?++a:--a)for(h=0,c=g.length;h<c;h++)g[h]._added(k.array[i+s],s);return p}}},{key:"_indexDescriptor",value:function(e,o,s){var u;return u=e,{get:function(){var r;return function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)r=s[e],n.push(r._accessed(u))}(),u},set:function(e){var t,n,r,i;if(u===e)return u;for(u=e,t=0,r=s.length;t<r;t++)s[t]._removed(u,o);for(n=0,i=s.length;n<i;n++)s[n]._added(e,o);return u},configurable:!0}}},{key:"added",value:function(e){var t,n,r,i;for(this._added=e,t=n=0,r=(i=this.array).length;n<r;t=++n)e(i[t],t);return this}},{key:"removed",value:function(e){return this._removed=e,this}},{key:"accessed",value:function(e){return this._accessed=e,this}}]),t}(),a.attach(u(function(){function e(){_classCallCheck(this,e),this.called="listener"}return _createClass(e,[{key:"_call",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f;if(e instanceof Array)return new i(e);if("object"===(void 0===e?"undefined":_typeof(e)))return new o(e,t);throw"Invalid parameter"}}]),e}())),s=function(){function n(e,t){_classCallCheck(this,n),this.tk=e,this.definition=t,this._data=null}return _createClass(n,[{key:"data",value:function(){return this._data=arguments,this}},{key:"_safeAppend",value:function(e,t){var n,r,i,o;if(t instanceof Array){for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(e.appendChild(n));return o}return e.appendChild(t)}},{key:"_realize",value:function(r){var e,i,t,n,o,s,u,a,l;if(!r)return document.createTextNode("");if("string"==typeof r||"number"==typeof r)a=document.createTextNode(r);else if("function"==typeof r)a=this._realize(r());else if(r instanceof Array)a=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(this._realize(i));return n}.call(this);else{for(o in a=document.createElement(r.tag),s=r.attributes)l=s[o],a.setAttribute(o,l);for(t=0,n=(u=r.children).length;t<n;t++)e=u[t],this._safeAppend(a,this._realize(e))}return a}},{key:"render",value:function(){return this.tk(this._realize(this.definition.apply(null,this._data)))}}]),n}(),a.attach(u(function(){function e(){_classCallCheck(this,e),this.called="template"}return _createClass(e,[{key:"_call",value:function(e){return new s(this,e)}},{key:"tag",value:function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return{tag:e,attributes:t||{},children:r,_virtual:!0}}}]),e}())),r=u(function(){function t(){var e;_classCallCheck(this,t),this.initialized=!1,e=!0,Object.defineProperty(this,"here",{get:function(){if(!e)return console.log("here"),"here";e=!1}})}return _createClass(t,[{key:"_call",value:function(e){return new h(e)}},{key:"_finalize",value:function(e){var t,n,r=this;this.config={root:null!=(t=e.root)?t:"undefined"!=typeof document&&null!==document?document:null,debug:null!=(n=e.debug)&&n},this.guts=a.onto(this),/complete|loaded|interactive/.test("undefined"!=typeof document&&null!==document?document.readyState:void 0)?(this.initialized=!0,this.guts.init()):"undefined"!=typeof window&&null!==window&&window.addEventListener("DOMContentLoaded",function(){return r.initialized=!0,r.guts.init()})}},{key:"init",value:function(e){return this.initialized&&e(),this.guts.initFunctions.push(e),this}},{key:"inspection",value:function(e){return this.guts.inspectionFunctions.push(e),this}},{key:"log",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(null!=(e=this.config)?e.debug:void 0)&&console.log.apply(null,n),n[0]}},{key:"warn",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(null!=(e=this.config)?e.debug:void 0)&&console.warn.apply(null,n),n[0]}},{key:"resolve",value:function(e){if("function"!=typeof e)return e;for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(null,n)}},{key:"time",value:function(){return(new Date).getTime()}},{key:"range",value:function(e){var t,n,r,i,o,s,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(r=0,u&&(r=e,e=u),s=[],t=n=i=r,o=e;i<=o?n<o:o<n;t=i<=o?++n:--n)s.push(t);return s}},{key:"iter",value:function(e,t){var n,r,i,o;if(e instanceof Array)for(n=r=0,i=e.length;r<i&&!1!==t(e[n],n);n=++r);else{if("object"!==(void 0===e?"undefined":_typeof(e)))throw"Not iterable: "+e;for(o in e)if(!1===t(o,e[o]))break}}},{key:"comp",value:function(e,t){var n,r,i,o,s;for(o=[],n=r=0,i=e.length;r<i;n=++r)null!=(s=t(e[n],n))&&o.push(s);return o}},{key:"compr",value:function(e,t){return console.warn("compr() is deprecated! Use comp() instead."),this.comp(e,t)}},{key:"timeout",value:function(e,t){return setTimeout(t,e)}},{key:"tag",value:function(e){var t,n,r,i,o,s,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(i in n=document.createElement(e),u)s=u[i],n.setAttribute(i,s);for(var a=arguments.length,l=Array(2<a?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];for(r=0,o=l.length;r<o;r++)"string"==typeof(t=l[r])?n.appendChild(document.createTextNode(t)):n.appendChild(this.tag(t));return new h(n)}}]),t}()),l={create:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(e=new r)._finalize(t),e}},"undefined"!=typeof window&&null!==window?window.toolkit=l:module.exports=l}).call(void 0);